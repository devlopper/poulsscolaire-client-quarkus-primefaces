<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template/page.xhtml">

  <ui:param name="page" value="#{accountingOperationListPage}" />

  <ui:define name="content-body">
    <p:importEnum type="org.cyk.system.poulsscolaire.server.api.accounting.AccountingAccountType"
      var="AccountingAccountType" />

    <p:importConstants
      type="org.cyk.system.poulsscolaire.server.api.accounting.AccountingOperationFilter"
      var="AccountingOperationFilter" />
    <p:importConstants
      type="org.cyk.system.poulsscolaire.client.accounting.AccountingOperationListPage"
      var="AccountingOperationListPage" />
    <ui:param name="selectedTabIndexParameterName" value="sti" />

    <p:tabMenu activeIndex="#{param[selectedTabIndexParameterName]}">
      <p:menuitem value="#{AccountingAccountType.EXPENDITURE}"
        outcome="#{AccountingOperationListPage.OUTCOME}" icon="pi pi-arrow-down-right">
        <f:param name="#{selectedTabIndexParameterName}" value="0" />
        <f:param name="#{AccountingOperationFilter.JSON_ACCOUNT_TYPE}"
          value="#{AccountingAccountType.EXPENDITURE.name()}" />
        <f:param name="#{AccountingOperationFilter.JSON_CANCELED}" value="false" />
      </p:menuitem>

      <p:menuitem value="Dépense annulée"
        outcome="#{AccountingOperationListPage.OUTCOME}">
        <f:param name="#{selectedTabIndexParameterName}" value="1" />
        <f:param name="#{AccountingOperationFilter.JSON_ACCOUNT_TYPE}"
          value="#{AccountingAccountType.EXPENDITURE.name()}" />
        <f:param name="#{AccountingOperationFilter.JSON_CANCELED}" value="true" />
      </p:menuitem>

      <p:menuitem value="#{AccountingAccountType.INCOME}"
        outcome="#{AccountingOperationListPage.OUTCOME}" icon="pi pi-arrow-up-right">
        <f:param name="#{selectedTabIndexParameterName}" value="2" />
        <f:param name="#{AccountingOperationFilter.JSON_ACCOUNT_TYPE}"
          value="#{AccountingAccountType.INCOME.name()}" />
      </p:menuitem>

    </p:tabMenu>

    <ui:include src="../../component/listForm.xhtml">
      <ui:param name="controller" value="#{page.controller.listController}" />
      <ui:param name="container" value="#{page.controller}" />
    </ui:include>
  </ui:define>
</ui:composition>
